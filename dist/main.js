(()=>{"use strict";function e(e,t){if(e<t-1&&e>0)return"top";if(e<t**2-1&&e>t**2-t)return"bottom";for(let a=1;a<t-1;a+=1){if(e===t*a)return"left";if(e===t*a+(t-1))return"right"}switch(e){case 0:return"top-left";case t-1:return"top-right";case t*(t-1):return"bottom-left";case t**2-1:return"bottom-right";default:return"center"}}function t(e,t){return e.map(t)}function a(e,t){return Object.assign(e,t),e}const s={prairie:"prairie",desert:"desert",arctic:"arctic",mountain:"mountain"};class i{constructor(e){this.levelGame=1,this.gamePlay=e,this.isMove="user",this.countClick=0,this.userTeamSurvivors=[],this.history=[],this.points=0,this.block=!1,this.userTeam=[],this.compTeam=[],this.activeChar=null,this.indexSelect=null,this.transitionCells=[],this.attackCells=[],this.showModal=!1}getAllPlayer(){if(!this.userTeam||!this.compTeam)throw new Error("it must have 2 arguments");return[...this.userTeam,...this.compTeam]}calculateSumPoints(){return this.userTeam.reduce(((e,t)=>e+t.character.health),0)}getUserPosition(){const e=this.userTeam.find((e=>this.attackCells.includes(e.position)));return e?e.position:void 0}findPresumedDeceasedPlayer(){return this.getAllPlayer().find((e=>e.position===this.activeCharUser?.position))}getPresumedDeceasedPlayerInfo(e){return{index:("comp"===this.isMove?this.userTeam:this.compTeam).findIndex((t=>e===t.position)),teamKey:"comp"===this.isMove?"userTeam":"compTeam"}}getPlayer(e){return this.getAllPlayer().find((t=>t.position===e))}}const l="auto",n="pointer",r="crosshair",o="not-allowed",h=new class{constructor(){this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.isModal=!1,this.initModalListener()}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}initModalListener(){document.addEventListener("click",(e=>{"modalHandlerCancel"===e.target.dataset.handler&&this.currentModal&&(this.currentModal.hide(),this.isModal=!1)}))}drawUi(t){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(t);for(let t=0;t<this.boardSize**2;t+=1){const a=document.createElement("div");a.classList.add("cell","map-tile",`map-tile-${e(t,this.boardSize)}`),a.addEventListener("mouseenter",(e=>this.onCellEnter(e))),a.addEventListener("mouseleave",(e=>this.onCellLeave(e))),a.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(a)}this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const a of e){const e=this.boardEl.children[a.position],s=document.createElement("div");s.classList.add("character",a.character.type);const i=document.createElement("div");i.classList.add("health-level");const l=document.createElement("div");l.classList.add("health-level-indicator","health-level-indicator-"+((t=a.character.health)<15?"critical":t<50?"normal":"high")),l.style.width=`${a.character.health}%`,i.appendChild(l),s.appendChild(i),e.appendChild(s)}var t}showModal(e,t){const a=new ModalPopup({title:e,content:`&#${t}`,footerButtons:[{class:"btn btn__cancel",text:"Close",handler:"modalHandlerCancel"}]});this.currentModal=a,a.show()}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}onCellEnter(e){const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(){this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(){this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(){this.loadGameListeners.forEach((e=>e.call(null)))}showModalMessage(e,t){this.isModal||(this.isModal=!0,this.showModal(e,t))}selectCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t&&t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((a=>{const s=this.cells[e],i=document.createElement("span");i.className="damage",i.textContent=t,s.appendChild(i),i.addEventListener("animationend",(()=>{s.removeChild(i),a(!0)}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}};h.bindToDOM(document.querySelector("#game-container"));const c=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("state"))}catch(e){throw new Error("Invalid state")}}}(localStorage),m=new class{constructor(e,t){this.gamePlay=e,this.stateService=t,this.gameState=new i(this.gamePlay),this.onCellClick=this.onCellClick.bind(this),this.onCellEnter=this.onCellEnter.bind(this),this.onCellLeave=this.onCellLeave.bind(this),this.newGame=this.newGame.bind(this),this.saveGame=this.saveGame.bind(this),this.loadGame=this.loadGame.bind(this),this.events()}init(){this.initNewTeams(),this.updatePicture()}events(){this.gamePlay.addCellEnterListener(this.onCellEnter),this.gamePlay.addCellLeaveListener(this.onCellLeave),this.gamePlay.addCellClickListener(this.onCellClick),this.gamePlay.addNewGameListener(this.newGame),this.gamePlay.addSaveGameListener(this.saveGame),this.gamePlay.addLoadGameListener(this.loadGame)}newGame(){const e={levelGame:1,countClick:0,history:[...this.gameState.history,{levelGame:this.gameState.levelGame,points:this.gameState.points}],isMove:"user",block:!1,points:0};a(this.gameState,e),this.reset(),this.init()}saveGame(){this.gameState.attackCells=[],this.gameState.transitionCells=[],this.gameState.activeCharUser=null,this.stateService.save(this.gameState),this.gamePlay.showModalMessage("Your game has saved!","9997")}loadGame(){try{const e=this.stateService.load();this.restoreGameState(e),this.restoreActiveCharacter(e.activeChar),this.updatePicture(),this.showGameInfo()}catch(e){this.handleLoadingError()}}restoreGameState(e){const{levelGame:t,countClick:s,history:i,isMove:l,block:n,points:r,indexSelect:o}=e;a(this.gameState,{levelGame:n?t-1:t,countClick:s,history:i,isMove:l,block:n,points:r,indexSelect:o}),this.resetTeams(e)}restoreActiveCharacter(e){const t=restoreChar(e);t&&"user"===t.isMove&&this.reactOnClick(t,["bowman","swordsman","magician"])}handleLoadingError(){this.gamePlay.showModalMessage("There's no game in memory","128075"),this.newGame()}initNewTeams(){this.gameState.userTeam=this.getUserTeam([this.gameState.levelGame,this.gameState.levelGame]),this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame,this.gameState.levelGame])}resetTeams(e){this.gameState.userTeam=t(e.userTeam,restoreChar),this.gameState.compTeam=t(e.compTeam,restoreChar)}levelUp(){const e=Object.values(s);this.updateTeams(),this.gameState.getAllPlayer().forEach((e=>e.character.levelUp())),this.gamePlay.drawUi(e[(this.gameState.levelGame-1)%e.length]),this.gameState.countClick=0,this.gameState.indexSelect=null}updateTeams(){const e=this.getUserTeam([this.gameState.levelGame-1,this.gameState.levelGame]),t=chooseRandPositions(this.gamePlay.boardSize);e.forEach((e=>{t.splice(t.indexOf(e.position),1)})),this.gameState.userTeamSurvivors.forEach((e=>{if(!t.includes(e.position)){const a=t[Math.floor(Math.random()*t.length)];e.position=a}})),this.gameState.userTeam=this.gameState.userTeamSurvivors.concat(e),this.gameState.userTeamSurvivors=[],this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame-1,this.gameState.userTeam.length])}showGameInfo(){const e=this.gameState.points?`Your level ${this.gameState.levelGame} and points ${this.gameState.points}`:"There's no points. \n It's the first round",t=this.gameState.points?"128076":"128083";this.gamePlay.showModalMessage(e,t)}async onCellClick(e){if(this.gameState.block)return;const t=this.gameState.getAllPlayer().find((t=>t.position===e));this.gameState.activeChar&&await this.handleUserTurn(e),this.reactOnClick(t,["bowman","swordsman","magician"]),this.gameState.countClick>=1&&await this.handleComputerTurn()}async handleUserTurn(e){this.gameState.indexSelect&&(this.gameState.indexSelect.green===e&&(this.gameState.activeChar.position=e,this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.indexSelect.red===e)&&(this.gameState.isMove="user",await this.doDamage(e)&&(this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),await this.checkGameProgress()))}async checkGameProgress(){0===this.gameState.compTeam.length&&(this.gameState.levelGame+=1,this.gameState.points+=this.gameState.calculateSumPoints(),this.reset(),this.gameState.userTeamSurvivors=this.gameState.userTeam,this.gamePlay.showModalMessage(`Level up! Your level ${this.gameState.levelGame} and total points are ${this.gameState.points}`,"9996"),this.levelUp(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()))}async handleComputerTurn(){this.gameState.activeCharUser=this.gameState.activeChar,this.gameState.isMove="comp",await this.doAttackComp(this)&&(this.gameState.countClick=0,this.gameState.isMove="user",this.gameState.findPresumedDeceasedPlayer()&&(this.gameState.activeChar=this.gameState.activeCharUser,this.reactOnClick(this.gameState.activeChar,["bowman","swordsman","magician"]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())))}onCellEnter(e){if(this.gameState.block)return;const t=this.gameState.getPlayer(e);if(t&&this.gamePlay.showCellTooltip(function(e){return`🎖${e.level} ⚔${e.attack} 🛡${e.defence} ❤${e.health}`}(t.character),e),!this.gameState.activeChar)return;const a=this.gameState.transitionCells.includes(e),s=this.gameState.attackCells.includes(e),i=this.gameState.userTeam.some((t=>t.position===e)),l=this.gameState.compTeam.some((t=>t.position===e));this.gamePlay.setCursor(n),this.gameState.indexSelect&&(!a||i||l||(this.gameState.indexSelect.green=e,this.gamePlay.selectCell(e,"green")),s&&l&&(this.gameState.indexSelect.red=e,this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(r)))}onCellLeave(e){if(this.gamePlay.hideCellTooltip(e),this.gameState.block)return;const t=document.querySelector(".selected-green"),a=this.gameState.attackCells?.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),!a&&s&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),this.gamePlay.setCursor(o))),document.querySelector(".selected-red")&&this.gamePlay.deselectCell(this.gameState.indexSelect.red)}reactOnClick(e,t){e&&(t.includes(e.character.type)?(this.updateSelectedCell(e.position),this.gamePlay.selectCell(e.position),this.gameState.activeChar=e):this.handleInvalidSelection(e.position))}updateSelectedCell(e){this.gameState.indexSelect&&document.querySelector(".selected-yellow")&&this.gamePlay.deselectCell(this.gameState.indexSelect.yellow),this.gameState.indexSelect={yellow:e}}handleInvalidSelection(e){const t=this.gameState.indexSelect,a=!this.gameState.attackCells.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&a&&s?this.gamePlay.showModalMessage("It can't be done","9940"):this.gameState.activeChar||this.gamePlay.showModalMessage("This isn`t your character","9995")}async doDamage(e){const{attack:t}=this.gameState.activeChar.character,a=this.gameState.getPlayer(e),{defence:s,health:i}=a.character,l=function(e,t){return Math.round(Math.max(e-t,.3*e))}(t,s);return!!await this.gamePlay.showDamage(e,l)&&(a.character.health=i-l,this.checkHealthRemoveDead(a),!0)}checkHealthRemoveDead(e){if(e.character.health<=0){const t=this.gameState.getPresumedDeceasedPlayerInfo(e.position);-1!==t.index&&(this.gameState[t.teamKey].splice(t.index,1),this.gameState.indexSelect=null)}}reset(){this.gameState.indexSelect&&(Object.keys(this.gameState.indexSelect).forEach((e=>{this.gamePlay.deselectCell(this.gameState.indexSelect[e])})),this.gameState.indexSelect=null,this.gamePlay.setCursor(l))}updatePicture(){const e=this.gameState.levelGame>0?this.gameState.levelGame-1:0;this.gamePlay.drawUi(Object.values(s)[e]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),this.gameState.indexSelect&&this.gameState.indexSelect.yellow&&this.gamePlay.selectCell(this.gameState.indexSelect.yellow)}async doAttackComp(){const e=(t=this.gameState.compTeam)[Math.floor(Math.random()*t.length)];var t;this.gameState.activeChar=e,this.reactOnClick(e,["daemon","undead","vampire"]);const a=this.gameState.getUserPosition();return void 0!==a?await this.doDamage(a)&&(this.checkAndEndGameIfNecessary(),this.updatePicture()):(this.gameState.activeChar.position=this.moveToRandomPosition(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.activeChar=null,this.reset(),!0}checkAndEndGameIfNecessary(){0===this.gameState.userTeam.length&&(this.gameState.block=!0,this.gamePlay.showModalMessage("You lose!","129335"))}moveToRandomPosition(){let e,t;do{e=Math.floor(Math.random()*this.gameState.transitionCells.length);const a=this.gameState.transitionCells[e];t=this.gameState.getAllPlayer().some((e=>e.position===a))}while(t);return this.gameState.transitionCells[e]}}(h,c);m.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtpSixVQUNibEksZUFDQXlMLE1BQU0xRixHQUFNQSxFQUFFbEYsV0FBYXVNLEdBQ2hDLE9BQVNELEdBRVQsT0FBT2xPLEtBQUtpSixVQUFVckksZ0JBQWdCcU4sRUFDeEMsR0gzZGtDbE8sRUFBVXNJLEdBQzlDVyxFQUFTTyxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy91dGlscy5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL3RoZW1lcy5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL2N1cnNvcnMuanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9HYW1lUGxheS5qcyIsIndlYnBhY2s6Ly9qcy1hZHZhbmNlZC1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vanMtYWR2YW5jZWQtZGlwbG9tYS8uL3NyYy9qcy9HYW1lQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEB0b2RvXG4gKiBAcGFyYW0gaW5kZXggLSDQuNC90LTQtdC60YEg0L/QvtC70Y9cbiAqIEBwYXJhbSBib2FyZFNpemUgLSDRgNCw0LfQvNC10YAg0LrQstCw0LTRgNCw0YLQvdC+0LPQviDQv9C+0LvRjyAo0LIg0LTQu9C40L3RgyDQuNC70Lgg0YjQuNGA0LjQvdGDKVxuICogQHJldHVybnMg0YHRgtGA0L7QutCwIC0g0YLQuNC/INGP0YfQtdC50LrQuCDQvdCwINC/0L7Qu9C1OlxuICpcbiAqIHRvcC1sZWZ0XG4gKiB0b3AtcmlnaHRcbiAqIHRvcFxuICogYm90dG9tLWxlZnRcbiAqIGJvdHRvbS1yaWdodFxuICogYm90dG9tXG4gKiByaWdodFxuICogbGVmdFxuICogY2VudGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBjYWxjVGlsZVR5cGUoMCwgOCk7IC8vICd0b3AtbGVmdCdcbiAqIGNhbGNUaWxlVHlwZSgxLCA4KTsgLy8gJ3RvcCdcbiAqIGNhbGNUaWxlVHlwZSg2MywgOCk7IC8vICdib3R0b20tcmlnaHQnXG4gKiBjYWxjVGlsZVR5cGUoNywgNyk7IC8vICdsZWZ0J1xuICogYGBgXG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNUaWxlVHlwZShpbmRleCwgYm9hcmRTaXplKSB7XG4gIC8vIFRPRE86INCy0LDRiCDQutC+0LQg0LHRg9C00LXRgiDRgtGD0YJcbiAgaWYgKGluZGV4IDwgYm9hcmRTaXplIC0gMSAmJiBpbmRleCA+IDApIHtcbiAgICByZXR1cm4gXCJ0b3BcIjtcbiAgfVxuICBpZiAoaW5kZXggPCBib2FyZFNpemUgKiogMiAtIDEgJiYgaW5kZXggPiBib2FyZFNpemUgKiogMiAtIGJvYXJkU2l6ZSkge1xuICAgIHJldHVybiBcImJvdHRvbVwiO1xuICB9XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYm9hcmRTaXplIC0gMTsgaSArPSAxKSB7XG4gICAgaWYgKGluZGV4ID09PSBib2FyZFNpemUgKiBpKSB7XG4gICAgICByZXR1cm4gXCJsZWZ0XCI7XG4gICAgfVxuICAgIGlmIChpbmRleCA9PT0gYm9hcmRTaXplICogaSArIChib2FyZFNpemUgLSAxKSkge1xuICAgICAgcmV0dXJuIFwicmlnaHRcIjtcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgY2FzZSAwOlxuICAgICAgcmV0dXJuIFwidG9wLWxlZnRcIjtcbiAgICBjYXNlIGJvYXJkU2l6ZSAtIDE6XG4gICAgICByZXR1cm4gXCJ0b3AtcmlnaHRcIjtcbiAgICBjYXNlIGJvYXJkU2l6ZSAqIChib2FyZFNpemUgLSAxKTpcbiAgICAgIHJldHVybiBcImJvdHRvbS1sZWZ0XCI7XG4gICAgY2FzZSBib2FyZFNpemUgKiogMiAtIDE6XG4gICAgICByZXR1cm4gXCJib3R0b20tcmlnaHRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiY2VudGVyXCI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNIZWFsdGhMZXZlbChoZWFsdGgpIHtcbiAgaWYgKGhlYWx0aCA8IDE1KSB7XG4gICAgcmV0dXJuIFwiY3JpdGljYWxcIjtcbiAgfVxuXG4gIGlmIChoZWFsdGggPCA1MCkge1xuICAgIHJldHVybiBcIm5vcm1hbFwiO1xuICB9XG5cbiAgcmV0dXJuIFwiaGlnaFwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUNoYXJhY3RlcnMoY2hhcmFjdGVycywgcmVzdG9yZUZuKSB7XG4gIHJldHVybiBjaGFyYWN0ZXJzLm1hcChyZXN0b3JlRm4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBBdHRhY2tEZWZlbmNlKGJlZm9yZSwgbGlmZSkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLm1heChiZWZvcmUsIChiZWZvcmUgKiAoODAgKyBsaWZlKSkgLyAxMDApKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURhbWFnZShhdHRhY2ssIGRlZmVuY2UpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5tYXgoYXR0YWNrIC0gZGVmZW5jZSwgYXR0YWNrICogMC4zKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmZvKHBsYXllcikge1xuICByZXR1cm4gYFxcdXsxRjM5Nn0ke3BsYXllci5sZXZlbH0gXFx1MjY5NCR7cGxheWVyLmF0dGFja30gXFx1ezFGNkUxfSR7cGxheWVyLmRlZmVuY2V9IFxcdTI3NjQke3BsYXllci5oZWFsdGh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG92ZXJ3cml0ZVByb3BlcnRpZXModGFyZ2V0LCBzb3VyY2UpIHtcbiAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21DaGFyYWN0ZXIodGVhbSkge1xuICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlYW0ubGVuZ3RoKTtcbiAgcmV0dXJuIHRlYW1bcmFuZG9tSW5kZXhdO1xufVxuIiwiY29uc3QgdGhlbWVzID0ge1xuICBwcmFpcmllOiBcInByYWlyaWVcIixcbiAgZGVzZXJ0OiBcImRlc2VydFwiLFxuICBhcmN0aWM6IFwiYXJjdGljXCIsXG4gIG1vdW50YWluOiBcIm1vdW50YWluXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCB0aGVtZXM7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xuICBjb25zdHJ1Y3RvcihnYW1lUGxheSkge1xuICAgIHRoaXMubGV2ZWxHYW1lID0gMTtcbiAgICB0aGlzLmdhbWVQbGF5ID0gZ2FtZVBsYXk7XG4gICAgdGhpcy5pc01vdmUgPSBcInVzZXJcIjtcbiAgICB0aGlzLmNvdW50Q2xpY2sgPSAwO1xuICAgIHRoaXMudXNlclRlYW1TdXJ2aXZvcnMgPSBbXTtcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcbiAgICB0aGlzLnBvaW50cyA9IDA7XG4gICAgdGhpcy5ibG9jayA9IGZhbHNlO1xuICAgIHRoaXMudXNlclRlYW0gPSBbXTtcbiAgICB0aGlzLmNvbXBUZWFtID0gW107XG4gICAgdGhpcy5hY3RpdmVDaGFyID0gbnVsbDtcbiAgICB0aGlzLmluZGV4U2VsZWN0ID0gbnVsbDtcbiAgICB0aGlzLnRyYW5zaXRpb25DZWxscyA9IFtdO1xuICAgIHRoaXMuYXR0YWNrQ2VsbHMgPSBbXTtcbiAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0QWxsUGxheWVyKCkge1xuICAgIGlmICghdGhpcy51c2VyVGVhbSB8fCAhdGhpcy5jb21wVGVhbSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIml0IG11c3QgaGF2ZSAyIGFyZ3VtZW50c1wiKTtcbiAgICByZXR1cm4gWy4uLnRoaXMudXNlclRlYW0sIC4uLnRoaXMuY29tcFRlYW1dO1xuICB9XG5cbiAgY2FsY3VsYXRlU3VtUG9pbnRzKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXJUZWFtLnJlZHVjZSgoYSwgYikgPT4gYSArIGIuY2hhcmFjdGVyLmhlYWx0aCwgMCk7XG4gIH1cblxuICBnZXRVc2VyUG9zaXRpb24oKSB7XG4gICAgY29uc3QgZm91bmRJdGVtID0gdGhpcy51c2VyVGVhbS5maW5kKChpdGVtKSA9PlxuICAgICAgdGhpcy5hdHRhY2tDZWxscy5pbmNsdWRlcyhpdGVtLnBvc2l0aW9uKVxuICAgICk7XG4gICAgcmV0dXJuIGZvdW5kSXRlbSA/IGZvdW5kSXRlbS5wb3NpdGlvbiA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFsbFBsYXllcigpLmZpbmQoXG4gICAgICAoZSkgPT4gZS5wb3NpdGlvbiA9PT0gdGhpcy5hY3RpdmVDaGFyVXNlcj8ucG9zaXRpb25cbiAgICApO1xuICB9XG5cbiAgZ2V0UHJlc3VtZWREZWNlYXNlZFBsYXllckluZm8ocG9zaXRpb24pIHtcbiAgICBjb25zdCB0ZWFtID0gdGhpcy5pc01vdmUgPT09IFwiY29tcFwiID8gdGhpcy51c2VyVGVhbSA6IHRoaXMuY29tcFRlYW07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXg6IHRlYW0uZmluZEluZGV4KChpdGVtKSA9PiBwb3NpdGlvbiA9PT0gaXRlbS5wb3NpdGlvbiksXG4gICAgICB0ZWFtS2V5OiB0aGlzLmlzTW92ZSA9PT0gXCJjb21wXCIgPyBcInVzZXJUZWFtXCIgOiBcImNvbXBUZWFtXCIsXG4gICAgfTtcbiAgfVxuXG4gIGdldFBsYXllcihpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmdldEFsbFBsYXllcigpLmZpbmQoKGVsKSA9PiBlbC5wb3NpdGlvbiA9PT0gaW5kZXgpO1xuICB9XG59XG4iLCJjb25zdCBjdXJzb3JzID0ge1xuICBhdXRvOiBcImF1dG9cIixcbiAgcG9pbnRlcjogXCJwb2ludGVyXCIsXG4gIGNyb3NzaGFpcjogXCJjcm9zc2hhaXJcIixcbiAgbm90YWxsb3dlZDogXCJub3QtYWxsb3dlZFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY3Vyc29ycztcbiIsIi8qKlxuICogRW50cnkgcG9pbnQgb2YgYXBwOiBkb24ndCBjaGFuZ2UgdGhpc1xuICovXG5pbXBvcnQgR2FtZVBsYXkgZnJvbSAnLi9HYW1lUGxheSc7XG5pbXBvcnQgR2FtZUNvbnRyb2xsZXIgZnJvbSAnLi9HYW1lQ29udHJvbGxlcic7XG5pbXBvcnQgR2FtZVN0YXRlU2VydmljZSBmcm9tICcuL0dhbWVTdGF0ZVNlcnZpY2UnO1xuXG5jb25zdCBnYW1lUGxheSA9IG5ldyBHYW1lUGxheSgpO1xuZ2FtZVBsYXkuYmluZFRvRE9NKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLWNvbnRhaW5lcicpKTtcblxuY29uc3Qgc3RhdGVTZXJ2aWNlID0gbmV3IEdhbWVTdGF0ZVNlcnZpY2UobG9jYWxTdG9yYWdlKTtcblxuY29uc3QgZ2FtZUN0cmwgPSBuZXcgR2FtZUNvbnRyb2xsZXIoZ2FtZVBsYXksIHN0YXRlU2VydmljZSk7XG5nYW1lQ3RybC5pbml0KCk7XG5cbi8vIGRvbid0IHdyaXRlIHlvdXIgY29kZSBoZXJlXG4iLCJpbXBvcnQgeyBjYWxjSGVhbHRoTGV2ZWwsIGNhbGNUaWxlVHlwZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVQbGF5IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ib2FyZFNpemUgPSA4O1xuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICB0aGlzLmJvYXJkRWwgPSBudWxsO1xuICAgIHRoaXMuY2VsbHMgPSBbXTtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5jZWxsTGVhdmVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xuXG4gICAgdGhpcy5pbml0TW9kYWxMaXN0ZW5lcigpO1xuICB9XG5cbiAgYmluZFRvRE9NKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29udGFpbmVyIGlzIG5vdCBIVE1MRWxlbWVudFwiKTtcbiAgICB9XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBpbml0TW9kYWxMaXN0ZW5lcigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQuZGF0YXNldC5oYW5kbGVyID09PSBcIm1vZGFsSGFuZGxlckNhbmNlbFwiICYmXG4gICAgICAgIHRoaXMuY3VycmVudE1vZGFsXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kYWwuaGlkZSgpO1xuICAgICAgICB0aGlzLmlzTW9kYWwgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBib2FyZEVsIHdpdGggc3BlY2lmaWMgdGhlbWVcbiAgICpcbiAgICogQHBhcmFtIHRoZW1lXG4gICAqL1xuICBkcmF3VWkodGhlbWUpIHtcbiAgICB0aGlzLmNoZWNrQmluZGluZygpO1xuXG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzXCI+XG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1yZXN0YXJ0XCIgY2xhc3M9XCJidG5cIj5OZXcgR2FtZTwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGRhdGEtaWQ9XCJhY3Rpb24tc2F2ZVwiIGNsYXNzPVwiYnRuXCI+U2F2ZSBHYW1lPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1sb2FkXCIgY2xhc3M9XCJidG5cIj5Mb2FkIEdhbWU8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImJvYXJkLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGRhdGEtaWQ9XCJib2FyZFwiIGNsYXNzPVwiYm9hcmRcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICB0aGlzLm5ld0dhbWVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pZD1hY3Rpb24tcmVzdGFydF1cIik7XG4gICAgdGhpcy5zYXZlR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihcIltkYXRhLWlkPWFjdGlvbi1zYXZlXVwiKTtcbiAgICB0aGlzLmxvYWRHYW1lRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaWQ9YWN0aW9uLWxvYWRdXCIpO1xuXG4gICAgdGhpcy5uZXdHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT5cbiAgICAgIHRoaXMub25OZXdHYW1lQ2xpY2soZXZlbnQpXG4gICAgKTtcbiAgICB0aGlzLnNhdmVHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT5cbiAgICAgIHRoaXMub25TYXZlR2FtZUNsaWNrKGV2ZW50KVxuICAgICk7XG4gICAgdGhpcy5sb2FkR2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+XG4gICAgICB0aGlzLm9uTG9hZEdhbWVDbGljayhldmVudClcbiAgICApO1xuXG4gICAgdGhpcy5ib2FyZEVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihcIltkYXRhLWlkPWJvYXJkXVwiKTtcbiAgICB0aGlzLmJvYXJkRWwuY2xhc3NMaXN0LmFkZCh0aGVtZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNlbGxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjZWxsRWwuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgXCJjZWxsXCIsXG4gICAgICAgIFwibWFwLXRpbGVcIixcbiAgICAgICAgYG1hcC10aWxlLSR7Y2FsY1RpbGVUeXBlKGksIHRoaXMuYm9hcmRTaXplKX1gXG4gICAgICApO1xuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIChldmVudCkgPT4gdGhpcy5vbkNlbGxFbnRlcihldmVudCkpO1xuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIChldmVudCkgPT4gdGhpcy5vbkNlbGxMZWF2ZShldmVudCkpO1xuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHRoaXMub25DZWxsQ2xpY2soZXZlbnQpKTtcbiAgICAgIHRoaXMuYm9hcmRFbC5hcHBlbmRDaGlsZChjZWxsRWwpO1xuICAgIH1cblxuICAgIHRoaXMuY2VsbHMgPSBBcnJheS5mcm9tKHRoaXMuYm9hcmRFbC5jaGlsZHJlbik7XG4gIH1cblxuICAvKipcbiAgICogRHJhd3MgcG9zaXRpb25zICh3aXRoIGNoYXJzKSBvbiBib2FyZEVsXG4gICAqXG4gICAqIEBwYXJhbSBwb3NpdGlvbnMgYXJyYXkgb2YgUG9zaXRpb25lZENoYXJhY3RlciBvYmplY3RzXG4gICAqL1xuICByZWRyYXdQb3NpdGlvbnMocG9zaXRpb25zKSB7XG4gICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuY2VsbHMpIHtcbiAgICAgIGNlbGwuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9ucykge1xuICAgICAgY29uc3QgY2VsbEVsID0gdGhpcy5ib2FyZEVsLmNoaWxkcmVuW3Bvc2l0aW9uLnBvc2l0aW9uXTtcbiAgICAgIGNvbnN0IGNoYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjaGFyRWwuY2xhc3NMaXN0LmFkZChcImNoYXJhY3RlclwiLCBwb3NpdGlvbi5jaGFyYWN0ZXIudHlwZSk7XG5cbiAgICAgIGNvbnN0IGhlYWx0aEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGhlYWx0aEVsLmNsYXNzTGlzdC5hZGQoXCJoZWFsdGgtbGV2ZWxcIik7XG5cbiAgICAgIGNvbnN0IGhlYWx0aEluZGljYXRvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGhlYWx0aEluZGljYXRvckVsLmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIFwiaGVhbHRoLWxldmVsLWluZGljYXRvclwiLFxuICAgICAgICBgaGVhbHRoLWxldmVsLWluZGljYXRvci0ke2NhbGNIZWFsdGhMZXZlbChwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRoKX1gXG4gICAgICApO1xuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuc3R5bGUud2lkdGggPSBgJHtwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRofSVgO1xuICAgICAgaGVhbHRoRWwuYXBwZW5kQ2hpbGQoaGVhbHRoSW5kaWNhdG9yRWwpO1xuICAgICAgY2hhckVsLmFwcGVuZENoaWxkKGhlYWx0aEVsKTtcbiAgICAgIGNlbGxFbC5hcHBlbmRDaGlsZChjaGFyRWwpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dNb2RhbChtZXNzYWdlLCB1bmljb2RlKSB7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWxQb3B1cCh7XG4gICAgICB0aXRsZTogbWVzc2FnZSxcbiAgICAgIGNvbnRlbnQ6IGAmIyR7dW5pY29kZX1gLFxuICAgICAgZm9vdGVyQnV0dG9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgY2xhc3M6IFwiYnRuIGJ0bl9fY2FuY2VsXCIsXG4gICAgICAgICAgdGV4dDogXCJDbG9zZVwiLFxuICAgICAgICAgIGhhbmRsZXI6IFwibW9kYWxIYW5kbGVyQ2FuY2VsXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jdXJyZW50TW9kYWwgPSBtb2RhbDtcblxuICAgIG1vZGFsLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgZW50ZXIgZm9yIGNlbGxcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRDZWxsRW50ZXJMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBsZWF2ZSBmb3IgY2VsbFxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZENlbGxMZWF2ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jZWxsTGVhdmVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGNsaWNrIGZvciBjZWxsXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKi9cbiAgYWRkQ2VsbENsaWNrTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJOZXcgR2FtZVwiIGJ1dHRvbiBjbGlja1xuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZE5ld0dhbWVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJTYXZlIEdhbWVcIiBidXR0b24gY2xpY2tcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRTYXZlR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJMb2FkIEdhbWVcIiBidXR0b24gY2xpY2tcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRMb2FkR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uQ2VsbEVudGVyKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNlbGxzLmluZGV4T2YoZXZlbnQuY3VycmVudFRhcmdldCk7XG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwsIGluZGV4KSk7XG4gIH1cblxuICBvbkNlbGxMZWF2ZShldmVudCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xuICB9XG5cbiAgb25DZWxsQ2xpY2soZXZlbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcbiAgfVxuXG4gIG9uTmV3R2FtZUNsaWNrKCkge1xuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xuICB9XG5cbiAgb25TYXZlR2FtZUNsaWNrKCkge1xuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcbiAgfVxuXG4gIG9uTG9hZEdhbWVDbGljaygpIHtcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsKSk7XG4gIH1cblxuICBzaG93TW9kYWxNZXNzYWdlKG1lc3NhZ2UsIHVuaWNvZGUpIHtcbiAgICBpZiAoIXRoaXMuaXNNb2RhbCkge1xuICAgICAgdGhpcy5pc01vZGFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2hvd01vZGFsKG1lc3NhZ2UsIHVuaWNvZGUpO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdENlbGwoaW5kZXgsIGNvbG9yID0gXCJ5ZWxsb3dcIikge1xuICAgIHRoaXMuZGVzZWxlY3RDZWxsKGluZGV4KTtcbiAgICB0aGlzLmNlbGxzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIiwgYHNlbGVjdGVkLSR7Y29sb3J9YCk7XG4gIH1cblxuICBkZXNlbGVjdENlbGwoaW5kZXgpIHtcbiAgICBjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tpbmRleF07XG5cbiAgICBpZiAoY2VsbCkge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgICAuLi5BcnJheS5mcm9tKGNlbGwuY2xhc3NMaXN0KS5maWx0ZXIoKG8pID0+IG8uc3RhcnRzV2l0aChcInNlbGVjdGVkXCIpKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBzaG93Q2VsbFRvb2x0aXAobWVzc2FnZSwgaW5kZXgpIHtcbiAgICB0aGlzLmNlbGxzW2luZGV4XS50aXRsZSA9IG1lc3NhZ2U7XG4gIH1cblxuICBoaWRlQ2VsbFRvb2x0aXAoaW5kZXgpIHtcbiAgICB0aGlzLmNlbGxzW2luZGV4XS50aXRsZSA9IFwiXCI7XG4gIH1cblxuICBzaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLmNlbGxzW2luZGV4XTtcbiAgICAgIGNvbnN0IGRhbWFnZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBkYW1hZ2VFbC5jbGFzc05hbWUgPSBcImRhbWFnZVwiO1xuICAgICAgZGFtYWdlRWwudGV4dENvbnRlbnQgPSBkYW1hZ2U7XG4gICAgICBjZWxsLmFwcGVuZENoaWxkKGRhbWFnZUVsKTtcblxuICAgICAgZGFtYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiB7XG4gICAgICAgIGNlbGwucmVtb3ZlQ2hpbGQoZGFtYWdlRWwpO1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRDdXJzb3IoY3Vyc29yKSB7XG4gICAgdGhpcy5ib2FyZEVsLnN0eWxlLmN1cnNvciA9IGN1cnNvcjtcbiAgfVxuXG4gIGNoZWNrQmluZGluZygpIHtcbiAgICBpZiAodGhpcy5jb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkdhbWVQbGF5IG5vdCBiaW5kIHRvIERPTVwiKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZVNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihzdG9yYWdlKSB7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgfVxuXG4gIHNhdmUoc3RhdGUpIHtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShcInN0YXRlXCIsIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gIH1cblxuICBsb2FkKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLnN0b3JhZ2UuZ2V0SXRlbShcInN0YXRlXCIpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlXCIpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHRoZW1lcyBmcm9tIFwiLi90aGVtZXNcIjtcbmltcG9ydCBHYW1lU3RhdGUgZnJvbSBcIi4vR2FtZVN0YXRlXCI7XG5pbXBvcnQgY3Vyc29ycyBmcm9tIFwiLi9jdXJzb3JzXCI7XG5pbXBvcnQge1xuICBjYWxjdWxhdGVEYW1hZ2UsXG4gIGdldEluZm8sXG4gIGdldFJhbmRvbUNoYXJhY3RlcixcbiAgb3ZlcndyaXRlUHJvcGVydGllcyxcbiAgcmVzdG9yZUNoYXJhY3RlcnMsXG59IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgQm93bWFuIGZyb20gXCIuL2NoYXJhY3RlcnMvQm93bWFuXCI7XG5pbXBvcnQgU3dvcmRzbWFuIGZyb20gXCIuL2NoYXJhY3RlcnMvU3dvcmRzbWFuXCI7XG5pbXBvcnQgTWFnaWNpYW4gZnJvbSBcIi4vY2hhcmFjdGVycy9NYWdpY2lhblwiO1xuaW1wb3J0IFZhbXBpcmUgZnJvbSBcIi4vY2hhcmFjdGVycy9WYW1waXJlXCI7XG5pbXBvcnQgRGFlbW9uIGZyb20gXCIuL2NoYXJhY3RlcnMvRGFlbW9uXCI7XG5pbXBvcnQgVW5kZWFkIGZyb20gXCIuL2NoYXJhY3RlcnMvVW5kZWFkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoZ2FtZVBsYXksIHN0YXRlU2VydmljZSkge1xuICAgIHRoaXMuZ2FtZVBsYXkgPSBnYW1lUGxheTtcbiAgICB0aGlzLnN0YXRlU2VydmljZSA9IHN0YXRlU2VydmljZTtcbiAgICB0aGlzLmdhbWVTdGF0ZSA9IG5ldyBHYW1lU3RhdGUodGhpcy5nYW1lUGxheSk7XG5cbiAgICB0aGlzLm9uQ2VsbENsaWNrID0gdGhpcy5vbkNlbGxDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DZWxsRW50ZXIgPSB0aGlzLm9uQ2VsbEVudGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNlbGxMZWF2ZSA9IHRoaXMub25DZWxsTGVhdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm5ld0dhbWUgPSB0aGlzLm5ld0dhbWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNhdmVHYW1lID0gdGhpcy5zYXZlR2FtZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMubG9hZEdhbWUgPSB0aGlzLmxvYWRHYW1lLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmV2ZW50cygpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICAvLyBUT0RPOiBhZGQgZXZlbnQgbGlzdGVuZXJzIHRvIGdhbWVQbGF5IGV2ZW50c1xuICAgIC8vIFRPRE86IGxvYWQgc2F2ZWQgc3RhdGVkIGZyb20gc3RhdGVTZXJ2aWNlXG4gICAgdGhpcy5pbml0TmV3VGVhbXMoKTtcbiAgICB0aGlzLnVwZGF0ZVBpY3R1cmUoKTtcbiAgfVxuXG4gIGV2ZW50cygpIHtcbiAgICB0aGlzLmdhbWVQbGF5LmFkZENlbGxFbnRlckxpc3RlbmVyKHRoaXMub25DZWxsRW50ZXIpO1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbExlYXZlTGlzdGVuZXIodGhpcy5vbkNlbGxMZWF2ZSk7XG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsQ2xpY2tMaXN0ZW5lcih0aGlzLm9uQ2VsbENsaWNrKTtcbiAgICB0aGlzLmdhbWVQbGF5LmFkZE5ld0dhbWVMaXN0ZW5lcih0aGlzLm5ld0dhbWUpO1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkU2F2ZUdhbWVMaXN0ZW5lcih0aGlzLnNhdmVHYW1lKTtcbiAgICB0aGlzLmdhbWVQbGF5LmFkZExvYWRHYW1lTGlzdGVuZXIodGhpcy5sb2FkR2FtZSk7XG4gIH1cblxuICBuZXdHYW1lKCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBsZXZlbEdhbWU6IDEsXG4gICAgICBjb3VudENsaWNrOiAwLFxuICAgICAgaGlzdG9yeTogW1xuICAgICAgICAuLi50aGlzLmdhbWVTdGF0ZS5oaXN0b3J5LFxuICAgICAgICB7XG4gICAgICAgICAgbGV2ZWxHYW1lOiB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgICAgICAgcG9pbnRzOiB0aGlzLmdhbWVTdGF0ZS5wb2ludHMsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgaXNNb3ZlOiBcInVzZXJcIixcbiAgICAgIGJsb2NrOiBmYWxzZSxcbiAgICAgIHBvaW50czogMCxcbiAgICB9O1xuXG4gICAgb3ZlcndyaXRlUHJvcGVydGllcyh0aGlzLmdhbWVTdGF0ZSwgZGF0YSk7XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBzYXZlR2FtZSgpIHtcbiAgICB0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscyA9IFtdO1xuICAgIHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxscyA9IFtdO1xuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXJVc2VyID0gbnVsbDtcbiAgICB0aGlzLnN0YXRlU2VydmljZS5zYXZlKHRoaXMuZ2FtZVN0YXRlKTtcbiAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoXCJZb3VyIGdhbWUgaGFzIHNhdmVkIVwiLCBcIjk5OTdcIik7XG4gIH1cblxuICBsb2FkR2FtZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRHYW1lU3RhdGUgPSB0aGlzLnN0YXRlU2VydmljZS5sb2FkKCk7XG4gICAgICB0aGlzLnJlc3RvcmVHYW1lU3RhdGUoc2F2ZWRHYW1lU3RhdGUpO1xuICAgICAgdGhpcy5yZXN0b3JlQWN0aXZlQ2hhcmFjdGVyKHNhdmVkR2FtZVN0YXRlLmFjdGl2ZUNoYXIpO1xuICAgICAgdGhpcy51cGRhdGVQaWN0dXJlKCk7XG4gICAgICB0aGlzLnNob3dHYW1lSW5mbygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuaGFuZGxlTG9hZGluZ0Vycm9yKCk7XG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZUdhbWVTdGF0ZShzYXZlZFN0YXRlKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGV2ZWxHYW1lLFxuICAgICAgY291bnRDbGljayxcbiAgICAgIGhpc3RvcnksXG4gICAgICBpc01vdmUsXG4gICAgICBibG9jayxcbiAgICAgIHBvaW50cyxcbiAgICAgIGluZGV4U2VsZWN0LFxuICAgIH0gPSBzYXZlZFN0YXRlO1xuXG4gICAgb3ZlcndyaXRlUHJvcGVydGllcyh0aGlzLmdhbWVTdGF0ZSwge1xuICAgICAgbGV2ZWxHYW1lOiBibG9jayA/IGxldmVsR2FtZSAtIDEgOiBsZXZlbEdhbWUsXG4gICAgICBjb3VudENsaWNrLFxuICAgICAgaGlzdG9yeSxcbiAgICAgIGlzTW92ZSxcbiAgICAgIGJsb2NrLFxuICAgICAgcG9pbnRzLFxuICAgICAgaW5kZXhTZWxlY3QsXG4gICAgfSk7XG5cbiAgICB0aGlzLnJlc2V0VGVhbXMoc2F2ZWRTdGF0ZSk7XG4gIH1cblxuICByZXN0b3JlQWN0aXZlQ2hhcmFjdGVyKHNhdmVkQWN0aXZlQ2hhcikge1xuICAgIGNvbnN0IHJlc3RhcnRlZEFjdGl2ZUNoYXIgPSByZXN0b3JlQ2hhcihzYXZlZEFjdGl2ZUNoYXIpO1xuICAgIGlmIChyZXN0YXJ0ZWRBY3RpdmVDaGFyICYmIHJlc3RhcnRlZEFjdGl2ZUNoYXIuaXNNb3ZlID09PSBcInVzZXJcIikge1xuICAgICAgdGhpcy5yZWFjdE9uQ2xpY2socmVzdGFydGVkQWN0aXZlQ2hhciwgW1xuICAgICAgICBcImJvd21hblwiLFxuICAgICAgICBcInN3b3Jkc21hblwiLFxuICAgICAgICBcIm1hZ2ljaWFuXCIsXG4gICAgICBdKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVMb2FkaW5nRXJyb3IoKSB7XG4gICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKFwiVGhlcmUncyBubyBnYW1lIGluIG1lbW9yeVwiLCBcIjEyODA3NVwiKTtcbiAgICB0aGlzLm5ld0dhbWUoKTtcbiAgfVxuXG4gIGluaXROZXdUZWFtcygpIHtcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHRoaXMuZ2V0VXNlclRlYW0oW1xuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxuICAgIF0pO1xuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gdGhpcy5nZXRDb21wVGVhbShbXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgXSk7XG4gIH1cblxuICByZXNldFRlYW1zKGdhbWVTdGF0ZSkge1xuICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtID0gcmVzdG9yZUNoYXJhY3RlcnMoXG4gICAgICBnYW1lU3RhdGUudXNlclRlYW0sXG4gICAgICByZXN0b3JlQ2hhclxuICAgICk7XG4gICAgdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0gPSByZXN0b3JlQ2hhcmFjdGVycyhcbiAgICAgIGdhbWVTdGF0ZS5jb21wVGVhbSxcbiAgICAgIHJlc3RvcmVDaGFyXG4gICAgKTtcbiAgfVxuXG4gIGxldmVsVXAoKSB7XG4gICAgY29uc3QgdGhlbWVWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoZW1lcyk7XG5cbiAgICB0aGlzLnVwZGF0ZVRlYW1zKCk7XG4gICAgdGhpcy5nYW1lU3RhdGVcbiAgICAgIC5nZXRBbGxQbGF5ZXIoKVxuICAgICAgLmZvckVhY2goKHBsYXllcikgPT4gcGxheWVyLmNoYXJhY3Rlci5sZXZlbFVwKCkpO1xuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKFxuICAgICAgdGhlbWVWYWx1ZXNbKHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEpICUgdGhlbWVWYWx1ZXMubGVuZ3RoXVxuICAgICk7XG4gICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA9IDA7XG4gICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xuICB9XG5cbiAgdXBkYXRlVGVhbXMoKSB7XG4gICAgY29uc3QgbmV3VXNlclRlYW0gPSB0aGlzLmdldFVzZXJUZWFtKFtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgXSk7XG4gICAgY29uc3QgYWxsU3RhcnRQb3NpdGlvbnMgPSBjaG9vc2VSYW5kUG9zaXRpb25zKHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKTtcbiAgICBuZXdVc2VyVGVhbS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBhbGxTdGFydFBvc2l0aW9ucy5zcGxpY2UoYWxsU3RhcnRQb3NpdGlvbnMuaW5kZXhPZihpdGVtLnBvc2l0aW9uKSwgMSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycy5mb3JFYWNoKChzdXJ2aXZvcikgPT4ge1xuICAgICAgaWYgKCFhbGxTdGFydFBvc2l0aW9ucy5pbmNsdWRlcyhzdXJ2aXZvci5wb3NpdGlvbikpIHtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPVxuICAgICAgICAgIGFsbFN0YXJ0UG9zaXRpb25zW1xuICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsU3RhcnRQb3NpdGlvbnMubGVuZ3RoKVxuICAgICAgICAgIF07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBzdXJ2aXZvci5wb3NpdGlvbiA9IG5ld1Bvc2l0aW9uO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPVxuICAgICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW1TdXJ2aXZvcnMuY29uY2F0KG5ld1VzZXJUZWFtKTtcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycyA9IFtdO1xuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gdGhpcy5nZXRDb21wVGVhbShbXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgLSAxLFxuICAgICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0ubGVuZ3RoLFxuICAgIF0pO1xuICB9XG5cbiAgc2hvd0dhbWVJbmZvKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmdhbWVTdGF0ZS5wb2ludHNcbiAgICAgID8gYFlvdXIgbGV2ZWwgJHt0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWV9IGFuZCBwb2ludHMgJHt0aGlzLmdhbWVTdGF0ZS5wb2ludHN9YFxuICAgICAgOiBcIlRoZXJlJ3Mgbm8gcG9pbnRzLiBcXG4gSXQncyB0aGUgZmlyc3Qgcm91bmRcIjtcbiAgICBjb25zdCBpY29uQ29kZSA9IHRoaXMuZ2FtZVN0YXRlLnBvaW50cyA/IFwiMTI4MDc2XCIgOiBcIjEyODA4M1wiO1xuXG4gICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKG1lc3NhZ2UsIGljb25Db2RlKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2VsbENsaWNrKGluZGV4KSB7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmJsb2NrKSByZXR1cm47XG5cbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLmdhbWVTdGF0ZVxuICAgICAgLmdldEFsbFBsYXllcigpXG4gICAgICAuZmluZCgoZWwpID0+IGVsLnBvc2l0aW9uID09PSBpbmRleCk7XG5cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhcikge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVc2VyVHVybihpbmRleCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWFjdE9uQ2xpY2socGxheWVyLCBbXCJib3dtYW5cIiwgXCJzd29yZHNtYW5cIiwgXCJtYWdpY2lhblwiXSk7XG5cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA+PSAxKSB7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZUNvbXB1dGVyVHVybigpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVVzZXJUdXJuKGluZGV4KSB7XG4gICAgaWYgKCF0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LmdyZWVuID09PSBpbmRleCkge1xuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5wb3NpdGlvbiA9IGluZGV4O1xuICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xuICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC5yZWQgPT09IGluZGV4KSB7XG4gICAgICB0aGlzLmdhbWVTdGF0ZS5pc01vdmUgPSBcInVzZXJcIjtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRG9EYW1hZ2UgPSBhd2FpdCB0aGlzLmRvRGFtYWdlKGluZGV4KTtcbiAgICAgIGlmIChyZXNwb25zZURvRGFtYWdlKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgKz0gMTtcbiAgICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkpO1xuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrR2FtZVByb2dyZXNzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tHYW1lUHJvZ3Jlc3MoKSB7XG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lICs9IDE7XG4gICAgICB0aGlzLmdhbWVTdGF0ZS5wb2ludHMgKz0gdGhpcy5nYW1lU3RhdGUuY2FsY3VsYXRlU3VtUG9pbnRzKCk7XG4gICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgIC8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIGhhbmRsZSBnYW1lIGVuZGluZ1xuICAgICAgLy8gYXdhaXQgdGhpcy5jaGVja0dhbWVPdmVyKCk7XG5cbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtU3Vydml2b3JzID0gdGhpcy5nYW1lU3RhdGUudXNlclRlYW07XG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoXG4gICAgICAgIGBMZXZlbCB1cCEgWW91ciBsZXZlbCAke3RoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZX0gYW5kIHRvdGFsIHBvaW50cyBhcmUgJHt0aGlzLmdhbWVTdGF0ZS5wb2ludHN9YCxcbiAgICAgICAgXCI5OTk2XCJcbiAgICAgICk7XG4gICAgICB0aGlzLmxldmVsVXAoKTtcbiAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICB9XG4gIH1cblxuICAvLyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBoYW5kbGUgZ2FtZSBlbmRpbmdcbiAgLy8gYXN5bmMgY2hlY2tHYW1lT3ZlcigpIHtcbiAgLy8gICBpZiAodGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lID49IDUpIHtcbiAgLy8gICAgIHRoaXMuZ2FtZVN0YXRlLnBvaW50ID0gdGhpcy5nYW1lU3RhdGUuY2FsY3VsYXRlU3VtUG9pbnRzKCk7XG4gIC8vICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9jayA9IHRydWU7XG4gIC8vICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5hbGxQbGF5ZXIpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAvLyAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKGBZb3Ugd2luISBZb3VyIHBvaW50cyBhcmUgJHt0aGlzLmdhbWVTdGF0ZS5wb2ludH1gLCAnMTI3ODgxJyk7XG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgYXN5bmMgaGFuZGxlQ29tcHV0ZXJUdXJuKCkge1xuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXJVc2VyID0gdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhcjtcbiAgICB0aGlzLmdhbWVTdGF0ZS5pc01vdmUgPSBcImNvbXBcIjtcbiAgICBjb25zdCByZXNwb25zZURvQXR0YWNrQ29tcCA9IGF3YWl0IHRoaXMuZG9BdHRhY2tDb21wKHRoaXMpO1xuICAgIGlmIChyZXNwb25zZURvQXR0YWNrQ29tcCkge1xuICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA9IDA7XG4gICAgICB0aGlzLmdhbWVTdGF0ZS5pc01vdmUgPSBcInVzZXJcIjtcblxuICAgICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyKCkpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXJVc2VyO1xuICAgICAgICB0aGlzLnJlYWN0T25DbGljayh0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyLCBbXG4gICAgICAgICAgXCJib3dtYW5cIixcbiAgICAgICAgICBcInN3b3Jkc21hblwiLFxuICAgICAgICAgIFwibWFnaWNpYW5cIixcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkNlbGxFbnRlcihpbmRleCkge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xuXG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nYW1lU3RhdGUuZ2V0UGxheWVyKGluZGV4KTtcbiAgICBpZiAocGxheWVyKSB7XG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dDZWxsVG9vbHRpcChnZXRJbmZvKHBsYXllci5jaGFyYWN0ZXIpLCBpbmRleCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyKSByZXR1cm47XG5cbiAgICBjb25zdCBpc1RyYW5zaXRpb25DZWxsID0gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzLmluY2x1ZGVzKGluZGV4KTtcbiAgICBjb25zdCBpc0F0dGFja0NlbGwgPSB0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscy5pbmNsdWRlcyhpbmRleCk7XG4gICAgY29uc3QgaXNVc2VyQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtLnNvbWUoXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wb3NpdGlvbiA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IGlzQ29tcENlbGwgPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKFxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucG9zaXRpb24gPT09IGluZGV4XG4gICAgKTtcblxuICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMucG9pbnRlcik7XG5cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHtcbiAgICAgIGlmIChpc1RyYW5zaXRpb25DZWxsICYmICFpc1VzZXJDZWxsICYmICFpc0NvbXBDZWxsKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LmdyZWVuID0gaW5kZXg7XG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbChpbmRleCwgXCJncmVlblwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQXR0YWNrQ2VsbCAmJiBpc0NvbXBDZWxsKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsIFwicmVkXCIpO1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLmNyb3NzaGFpcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DZWxsTGVhdmUoaW5kZXgpIHtcbiAgICB0aGlzLmdhbWVQbGF5LmhpZGVDZWxsVG9vbHRpcChpbmRleCk7XG5cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuYmxvY2spIHJldHVybjtcblxuICAgIGNvbnN0IGhhc1NlbGVjdGVkR3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLWdyZWVuXCIpO1xuICAgIGNvbnN0IGlzQXR0YWNrQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLmF0dGFja0NlbGxzPy5pbmNsdWRlcyhpbmRleCk7XG4gICAgY29uc3QgaXNDb21wVGVhbVBvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0uc29tZShcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBpbmRleFxuICAgICk7XG5cbiAgICBpZiAoaGFzU2VsZWN0ZWRHcmVlbikge1xuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xuXG4gICAgICBpZiAoIWlzQXR0YWNrQ2VsbCAmJiBpc0NvbXBUZWFtUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLm5vdGFsbG93ZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLXJlZFwiKSkge1xuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QucmVkKTtcbiAgICB9XG4gIH1cblxuICByZWFjdE9uQ2xpY2socGxheWVyLCBhcnJheVR5cGVzKSB7XG4gICAgaWYgKCFwbGF5ZXIpIHJldHVybjtcblxuICAgIGlmIChhcnJheVR5cGVzLmluY2x1ZGVzKHBsYXllci5jaGFyYWN0ZXIudHlwZSkpIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDZWxsKHBsYXllci5wb3NpdGlvbik7XG4gICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwocGxheWVyLnBvc2l0aW9uKTtcblxuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciA9IHBsYXllcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVJbnZhbGlkU2VsZWN0aW9uKHBsYXllci5wb3NpdGlvbik7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU2VsZWN0ZWRDZWxsKG51bSkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0ICYmXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLXllbGxvd1wiKVxuICAgICkge1xuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QueWVsbG93KTtcbiAgICB9XG4gICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSB7IHllbGxvdzogbnVtIH07XG4gIH1cblxuICBoYW5kbGVJbnZhbGlkU2VsZWN0aW9uKG51bSkge1xuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdDtcbiAgICBjb25zdCBpc05vdEluQXR0YWNrQ2VsbHMgPSAhdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHMuaW5jbHVkZXMobnVtKTtcbiAgICBjb25zdCBpc0NvbXB1dGVyVGVhbVBvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0uc29tZShcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBudW1cbiAgICApO1xuXG4gICAgaWYgKGlzU2VsZWN0ZWQgJiYgaXNOb3RJbkF0dGFja0NlbGxzICYmIGlzQ29tcHV0ZXJUZWFtUG9zaXRpb24pIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIkl0IGNhbid0IGJlIGRvbmVcIiwgXCI5OTQwXCIpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIlRoaXMgaXNuYHQgeW91ciBjaGFyYWN0ZXJcIiwgXCI5OTk1XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRvRGFtYWdlKGluZGV4KSB7XG4gICAgY29uc3QgeyBhdHRhY2sgfSA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIuY2hhcmFjdGVyO1xuICAgIGNvbnN0IG9wcG9uZW50ID0gdGhpcy5nYW1lU3RhdGUuZ2V0UGxheWVyKGluZGV4KTtcbiAgICBjb25zdCB7IGRlZmVuY2UsIGhlYWx0aCB9ID0gb3Bwb25lbnQuY2hhcmFjdGVyO1xuXG4gICAgY29uc3QgZGFtYWdlID0gY2FsY3VsYXRlRGFtYWdlKGF0dGFjaywgZGVmZW5jZSk7XG4gICAgY29uc3QgcmVzcG9uc2VTaG93RGFtYWdlID0gYXdhaXQgdGhpcy5nYW1lUGxheS5zaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpO1xuXG4gICAgaWYgKHJlc3BvbnNlU2hvd0RhbWFnZSkge1xuICAgICAgb3Bwb25lbnQuY2hhcmFjdGVyLmhlYWx0aCA9IGhlYWx0aCAtIGRhbWFnZTtcbiAgICAgIHRoaXMuY2hlY2tIZWFsdGhSZW1vdmVEZWFkKG9wcG9uZW50KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNoZWNrSGVhbHRoUmVtb3ZlRGVhZChwbGF5ZXIpIHtcbiAgICBpZiAocGxheWVyLmNoYXJhY3Rlci5oZWFsdGggPD0gMCkge1xuICAgICAgY29uc3QgaW5mbyA9IHRoaXMuZ2FtZVN0YXRlLmdldFByZXN1bWVkRGVjZWFzZWRQbGF5ZXJJbmZvKFxuICAgICAgICBwbGF5ZXIucG9zaXRpb25cbiAgICAgICk7XG5cbiAgICAgIGlmIChpbmZvLmluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZVtpbmZvLnRlYW1LZXldLnNwbGljZShpbmZvLmluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHJldHVybjtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0KS5mb3JFYWNoKChjb2xvcikgPT4ge1xuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3RbY29sb3JdKTtcbiAgICB9KTtcbiAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCA9IG51bGw7XG4gICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5hdXRvKTtcbiAgfVxuXG4gIHVwZGF0ZVBpY3R1cmUoKSB7XG4gICAgY29uc3QgbGV2ZWwgPVxuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lID4gMCA/IHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEgOiAwO1xuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKE9iamVjdC52YWx1ZXModGhlbWVzKVtsZXZlbF0pO1xuICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcblxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCAmJiB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbCh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRvQXR0YWNrQ29tcCgpIHtcbiAgICBjb25zdCBhY3RpdmVDb21wID0gZ2V0UmFuZG9tQ2hhcmFjdGVyKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtKTtcbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gYWN0aXZlQ29tcDtcbiAgICB0aGlzLnJlYWN0T25DbGljayhhY3RpdmVDb21wLCBbXCJkYWVtb25cIiwgXCJ1bmRlYWRcIiwgXCJ2YW1waXJlXCJdKTtcblxuICAgIGNvbnN0IHVzZXJQb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLmdldFVzZXJQb3NpdGlvbigpO1xuXG4gICAgaWYgKHVzZXJQb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCByZXNwb25zZURvRGFtYWdlID0gYXdhaXQgdGhpcy5kb0RhbWFnZSh1c2VyUG9zaXRpb24pO1xuICAgICAgaWYgKHJlc3BvbnNlRG9EYW1hZ2UpIHtcbiAgICAgICAgdGhpcy5jaGVja0FuZEVuZEdhbWVJZk5lY2Vzc2FyeSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBpY3R1cmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5wb3NpdGlvbiA9IHRoaXMubW92ZVRvUmFuZG9tUG9zaXRpb24oKTtcbiAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICB9XG5cbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gbnVsbDtcbiAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNoZWNrQW5kRW5kR2FtZUlmTmVjZXNzYXJ5KCkge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2NrID0gdHJ1ZTtcblxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKFwiWW91IGxvc2UhXCIsIFwiMTI5MzM1XCIpO1xuICAgIH1cbiAgfVxuXG4gIG1vdmVUb1JhbmRvbVBvc2l0aW9uKCkge1xuICAgIGxldCByYW5kO1xuICAgIGxldCBpc1BsYXllcjtcbiAgICBkbyB7XG4gICAgICByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzLmxlbmd0aCk7XG4gICAgICBjb25zdCBwb3RlbnRpYWxQb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxsc1tyYW5kXTtcbiAgICAgIGlzUGxheWVyID0gdGhpcy5nYW1lU3RhdGVcbiAgICAgICAgLmdldEFsbFBsYXllcigpXG4gICAgICAgIC5zb21lKChvKSA9PiBvLnBvc2l0aW9uID09PSBwb3RlbnRpYWxQb3NpdGlvbik7XG4gICAgfSB3aGlsZSAoaXNQbGF5ZXIpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxsc1tyYW5kXTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNhbGNUaWxlVHlwZSIsImluZGV4IiwiYm9hcmRTaXplIiwiaSIsInJlc3RvcmVDaGFyYWN0ZXJzIiwiY2hhcmFjdGVycyIsInJlc3RvcmVGbiIsIm1hcCIsIm92ZXJ3cml0ZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJzb3VyY2UiLCJPYmplY3QiLCJhc3NpZ24iLCJwcmFpcmllIiwiZGVzZXJ0IiwiYXJjdGljIiwibW91bnRhaW4iLCJHYW1lU3RhdGUiLCJjb25zdHJ1Y3RvciIsImdhbWVQbGF5IiwidGhpcyIsImxldmVsR2FtZSIsImlzTW92ZSIsImNvdW50Q2xpY2siLCJ1c2VyVGVhbVN1cnZpdm9ycyIsImhpc3RvcnkiLCJwb2ludHMiLCJibG9jayIsInVzZXJUZWFtIiwiY29tcFRlYW0iLCJhY3RpdmVDaGFyIiwiaW5kZXhTZWxlY3QiLCJ0cmFuc2l0aW9uQ2VsbHMiLCJhdHRhY2tDZWxscyIsInNob3dNb2RhbCIsImdldEFsbFBsYXllciIsIkVycm9yIiwiY2FsY3VsYXRlU3VtUG9pbnRzIiwicmVkdWNlIiwiYSIsImIiLCJjaGFyYWN0ZXIiLCJoZWFsdGgiLCJnZXRVc2VyUG9zaXRpb24iLCJmb3VuZEl0ZW0iLCJmaW5kIiwiaXRlbSIsImluY2x1ZGVzIiwicG9zaXRpb24iLCJ1bmRlZmluZWQiLCJmaW5kUHJlc3VtZWREZWNlYXNlZFBsYXllciIsImUiLCJhY3RpdmVDaGFyVXNlciIsImdldFByZXN1bWVkRGVjZWFzZWRQbGF5ZXJJbmZvIiwiZmluZEluZGV4IiwidGVhbUtleSIsImdldFBsYXllciIsImVsIiwiY29udGFpbmVyIiwiYm9hcmRFbCIsImNlbGxzIiwiY2VsbENsaWNrTGlzdGVuZXJzIiwiY2VsbEVudGVyTGlzdGVuZXJzIiwiY2VsbExlYXZlTGlzdGVuZXJzIiwibmV3R2FtZUxpc3RlbmVycyIsInNhdmVHYW1lTGlzdGVuZXJzIiwibG9hZEdhbWVMaXN0ZW5lcnMiLCJpc01vZGFsIiwiaW5pdE1vZGFsTGlzdGVuZXIiLCJiaW5kVG9ET00iLCJIVE1MRWxlbWVudCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGFzZXQiLCJoYW5kbGVyIiwiY3VycmVudE1vZGFsIiwiaGlkZSIsImRyYXdVaSIsInRoZW1lIiwiY2hlY2tCaW5kaW5nIiwiaW5uZXJIVE1MIiwibmV3R2FtZUVsIiwicXVlcnlTZWxlY3RvciIsInNhdmVHYW1lRWwiLCJsb2FkR2FtZUVsIiwiZXZlbnQiLCJvbk5ld0dhbWVDbGljayIsIm9uU2F2ZUdhbWVDbGljayIsIm9uTG9hZEdhbWVDbGljayIsImNsYXNzTGlzdCIsImFkZCIsImNlbGxFbCIsImNyZWF0ZUVsZW1lbnQiLCJvbkNlbGxFbnRlciIsIm9uQ2VsbExlYXZlIiwib25DZWxsQ2xpY2siLCJhcHBlbmRDaGlsZCIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwicmVkcmF3UG9zaXRpb25zIiwicG9zaXRpb25zIiwiY2VsbCIsImNoYXJFbCIsInR5cGUiLCJoZWFsdGhFbCIsImhlYWx0aEluZGljYXRvckVsIiwic3R5bGUiLCJ3aWR0aCIsIm1lc3NhZ2UiLCJ1bmljb2RlIiwibW9kYWwiLCJNb2RhbFBvcHVwIiwidGl0bGUiLCJjb250ZW50IiwiZm9vdGVyQnV0dG9ucyIsImNsYXNzIiwidGV4dCIsInNob3ciLCJhZGRDZWxsRW50ZXJMaXN0ZW5lciIsImNhbGxiYWNrIiwicHVzaCIsImFkZENlbGxMZWF2ZUxpc3RlbmVyIiwiYWRkQ2VsbENsaWNrTGlzdGVuZXIiLCJhZGROZXdHYW1lTGlzdGVuZXIiLCJhZGRTYXZlR2FtZUxpc3RlbmVyIiwiYWRkTG9hZEdhbWVMaXN0ZW5lciIsImluZGV4T2YiLCJjdXJyZW50VGFyZ2V0IiwiZm9yRWFjaCIsIm8iLCJjYWxsIiwic2hvd01vZGFsTWVzc2FnZSIsInNlbGVjdENlbGwiLCJjb2xvciIsImFyZ3VtZW50cyIsImxlbmd0aCIsImRlc2VsZWN0Q2VsbCIsInJlbW92ZSIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJzaG93Q2VsbFRvb2x0aXAiLCJoaWRlQ2VsbFRvb2x0aXAiLCJzaG93RGFtYWdlIiwiZGFtYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYW1hZ2VFbCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwicmVtb3ZlQ2hpbGQiLCJzZXRDdXJzb3IiLCJjdXJzb3IiLCJzdGF0ZVNlcnZpY2UiLCJzdG9yYWdlIiwic2F2ZSIsInN0YXRlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2FkIiwicGFyc2UiLCJnZXRJdGVtIiwibG9jYWxTdG9yYWdlIiwiZ2FtZUN0cmwiLCJnYW1lU3RhdGUiLCJiaW5kIiwibmV3R2FtZSIsInNhdmVHYW1lIiwibG9hZEdhbWUiLCJldmVudHMiLCJpbml0IiwiaW5pdE5ld1RlYW1zIiwidXBkYXRlUGljdHVyZSIsImRhdGEiLCJyZXNldCIsInNhdmVkR2FtZVN0YXRlIiwicmVzdG9yZUdhbWVTdGF0ZSIsInJlc3RvcmVBY3RpdmVDaGFyYWN0ZXIiLCJzaG93R2FtZUluZm8iLCJoYW5kbGVMb2FkaW5nRXJyb3IiLCJzYXZlZFN0YXRlIiwicmVzZXRUZWFtcyIsInNhdmVkQWN0aXZlQ2hhciIsInJlc3RhcnRlZEFjdGl2ZUNoYXIiLCJyZXN0b3JlQ2hhciIsInJlYWN0T25DbGljayIsImdldFVzZXJUZWFtIiwiZ2V0Q29tcFRlYW0iLCJsZXZlbFVwIiwidGhlbWVWYWx1ZXMiLCJ2YWx1ZXMiLCJ0aGVtZXMiLCJ1cGRhdGVUZWFtcyIsInBsYXllciIsIm5ld1VzZXJUZWFtIiwiYWxsU3RhcnRQb3NpdGlvbnMiLCJjaG9vc2VSYW5kUG9zaXRpb25zIiwic3BsaWNlIiwic3Vydml2b3IiLCJuZXdQb3NpdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNvbmNhdCIsImljb25Db2RlIiwiaGFuZGxlVXNlclR1cm4iLCJoYW5kbGVDb21wdXRlclR1cm4iLCJncmVlbiIsInJlZCIsImRvRGFtYWdlIiwiY2hlY2tHYW1lUHJvZ3Jlc3MiLCJkb0F0dGFja0NvbXAiLCJsZXZlbCIsImF0dGFjayIsImRlZmVuY2UiLCJnZXRJbmZvIiwiaXNUcmFuc2l0aW9uQ2VsbCIsImlzQXR0YWNrQ2VsbCIsImlzVXNlckNlbGwiLCJzb21lIiwiaXNDb21wQ2VsbCIsImN1cnNvcnMiLCJoYXNTZWxlY3RlZEdyZWVuIiwiaXNDb21wVGVhbVBvc2l0aW9uIiwiYXJyYXlUeXBlcyIsInVwZGF0ZVNlbGVjdGVkQ2VsbCIsImhhbmRsZUludmFsaWRTZWxlY3Rpb24iLCJudW0iLCJ5ZWxsb3ciLCJpc1NlbGVjdGVkIiwiaXNOb3RJbkF0dGFja0NlbGxzIiwiaXNDb21wdXRlclRlYW1Qb3NpdGlvbiIsIm9wcG9uZW50Iiwicm91bmQiLCJtYXgiLCJjYWxjdWxhdGVEYW1hZ2UiLCJjaGVja0hlYWx0aFJlbW92ZURlYWQiLCJpbmZvIiwia2V5cyIsImFjdGl2ZUNvbXAiLCJ0ZWFtIiwidXNlclBvc2l0aW9uIiwiY2hlY2tBbmRFbmRHYW1lSWZOZWNlc3NhcnkiLCJtb3ZlVG9SYW5kb21Qb3NpdGlvbiIsInJhbmQiLCJpc1BsYXllciIsInBvdGVudGlhbFBvc2l0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==